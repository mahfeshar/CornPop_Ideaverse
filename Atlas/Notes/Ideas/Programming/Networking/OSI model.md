---
up:
  - "[[Networking Fundamentals]]"
related: 
created: 2024-07-06
Output: "[[OSI model - Article]]"
---
## Open Systems Interconnection Model (OSI)

### ليه بنحتاج Communication Model؟
- بدون نموذج موحد (Standard Model):
  - التطبيق مش هيعرف نوع الـ **[[Network Components#Network media|media]]** اللي هيتواصل من خلالها (زي السلوك أو الكابلات).
  - السيرفر مش هيعرف يتواصل مع الـ Client.
  - مش هيتم تحويل الإشارات من **signal** لـ **analog** والعكس.
  - بناءً على نوع الـ media، لازم يتحدد طريقة تواصل مناسبة، مثل: Wi-Fi، Ethernet، LTE، Fiber، فأنت محتاج تعمل Version لكل واحدة.
  - في حالة عدم وجود نموذج موحد، هيكون تحديث معدات الشبكة (upgrade) صعب.
  
- بوجود Standard Model زي **OSI**:
  - تقدر تطور وتبتكر في كل طبقة بشكل منفصل بدون التأثير على الطبقات التانية.
  - تقدر تستبدل الـ **Physical Layer** مثلاً بتقنيات أسرع (مثل التحول من radio لـ fiber) بدون تغيير باقي النموذج.

![[Pasted image 20240721121818.png]]

---

### مقدمة
- منظمة **ISO** عملت نموذج موحد يساعد أنظمة التشغيل المختلفة (Windows, Linux, UNIX...) تتخاطب مع بعضها بلغة موحدة، وده هو نظام الـ OSI Layers.
- يتكون النموذج من 7 مراحل تمر بها البيانات من الجهاز المرسل مرورًا بالشبكة حتى تصل للجهاز المستقبل والعكس.
- هذا النموذج هو إطار فكري بيوضح إزاي يتم التواصل في الشبكة وبيسهل فهم انتقال البيانات عبر الشبكات.
	- It's a foundational concept in understanding how data travels across networks

![[Pasted image 20240508082553.png]]

---

### Why Layered Models
![[Pasted image 20240721122650.png]]
### OSI Layers

**ترتيب الطبقات من 7 إلى 1 بناءً على جهاز المستقبل**

#### 1. Application Layer (الطبقة السابعة): 
   - الواجهة اللي بيتعامل معها المستخدم مثل المتصفح والبريد الإلكتروني.
   - بتوفر network services للتطبيقات وبتحدد البروتوكول اللي يدعم الـ Action.
   - أمثلة [[Protocol|Protocols]] البروتوكولات :[[HTTP]] ، SMTP، FTP.
	   - البروتوكولات زي HTTP (تصفح الويب)، SMTP (البريد الإلكتروني)، وFTP (نقل الملفات) بتشتغل في الطبقة دي.
   - مثال: في مطعم، Application layer زي منطقة الانتظار والقائمة. المستخدم بيتفاعل مع القائمة (Application) عشان يختار اللي عايزه (Service)، ومنطقة الانتظار (Application layer) بتسهل التواصل مع المطبخ (Network) لتوصيل الطلب (data).

![[Pasted image 20240508082847.png]]
##### Some application layer protocols
بعض البروتوكولات الشهيرة في طبقة التطبيقات ووظيفتها:
-  الـ **[[HTTP]] (Hypertext Transfer Protocol):** دا الأساس في تصفح الويب وبيحدد إزاي المتصفحات والسيرفرات تتواصل. 
  لما تدخل عنوان موقع، HTTP بيشتغل في الخلفية ويجيب لك صفحات الويب والبيانات المطلوبة من السيرفر.
  
- الـ **`HTTPS` (Hypertext Transfer Protocol Secure):** النسخة الآمنة من HTTP. 
  بيشفر الاتصال بين المتصفحات والسيرفرات، وبيحمي البيانات الحساسة زي معلومات بطاقات الائتمان أو بيانات تسجيل الدخول أثناء النقل.
  
- الـ **`SMTP` (Simple Mail Transfer Protocol):** البروتوكول المسؤول عن البريد الإلكتروني. 
  لما تكتب إيميل وتضغط إرسال، SMTP بيتولى نقل الرسالة من جهازك لسيرفر بريد المستلم.
  
- الـ **`FTP` (File Transfer Protocol):** بيسمح بنقل الملفات بين الأجهزة على الشبكة. 
  زي لما ترفع أو تنزل ملفات من سيرفر بعيد، زي ما بتنقل صور من تليفونك للكمبيوتر.
  
- الـ **`SSH` (Secure Shell):** بيمكنك من الوصول الآمن عن بُعد للأنظمةوبيشفر الاتصال بين الكمبيوتر المحلي والسيرفر البعيد، وبيسمح للمستخدمين المصرح لهم بالدخول وإدارة الأنظمة البعيدة بشكل آمن.
#### 2. Presentation Layer (الطبقة السادسة):
   - بتحدد كيفية تنسيق البيانات **data formatting** لتناسب الإرسال بين الأنظمة المختلفة.
   - بتقوم بعمليات **التشفير** (Encryption)، **التنسيق** (Formatting)، و**الضغط** (Compression).

##### What is it doing?
1. Translation (Formatting)
	- بياخد الداتا اللي جاية من الـ application layer (حروف، أرقام، صور..) اللي هي human language ويحوله لـ machine language.
2. Data Compression
	- بيضغط الملفات عشان يقلل حجمها ويسهل عملية النقل.
3. Encryption
	- بيشفر الداتا ولما الـ receiver بتجيله الداتا بيفك الشفرة دي عن طريق بروتوكول SSL
![[Pasted image 20240508083432.png]]

#### 3. Session Layer (الطبقة الخامسة):
   - بتنشئ establishes وتدير manages وتُنهي terminates الجلسات بين التطبيقات المتواصلة.
   - بتحدد وضع الاتصال (Simplex، Half-duplex، Full-duplex) وتدير الصلاحيات والجلسات.
   - هي اللي بتبدأ الـ session الفعلية ومن هنا بيبدأ يبعت

##### What is it doing?
بيعمل أربع عمليات مختلفة:
1. Transmission mode
في المرحلة دي، بيتحدد وضع النقل وعندنا 3 أنواع:
	- **Simplex:** زي التليفزيون، بتستقبل بس ومبتبعتش.
	- **Half-duplex:** إرسال واستقبال لكن مش في نفس الوقت، زي اللاسلكي.
	- **Full-duplex:** زي التليفون، إرسال واستقبال في نفس الوقت.

2. Authentication
إثبات الهوية، لما تحاول تدخل على سيرفر، يطلب منك إيميل وباسوورد عشان تدخل.

3. Authorization
تحديد صلاحياتك كـ user على السيرفر، زي إذا كان لك access على فايل معين أو لأ

4. Session Management
لما تدخل على فيسبوك والنت مش شغال، بياخد معلومات من الجلسة السابقة ويخزنها مؤقتًا، وعند العودة بيعمل ريستور للبيانات حتى لو مش متصل بالنت

![[Pasted image 20240508084953.png]]
#### 4. Transport Layer (الطبقة الرابعة):
   - مسؤولة عن النقل الموثوق للبيانات بين التطبيقات على أجهزة مختلفة.
   - بتقسم البيانات إلى **segments** وبتضمن توصيلها الصحيح بالترتيب، وبتتعامل مع فحص الأخطاء وإعادة الإرسال إذا لزم الأمر.
   - بروتوكولات مثل **TCP** و**UDP** بتتحدد هنا حسب الحاجة للدقة أو السرعة.

![[Pasted image 20240727190303.png]]
##### What is it doing?
الطبقة دي بتعمل عمليتين مهمتين:
1. **Segmentation:**
   - بتقسم البيانات إلى مجموعة من الـ segments، وكل واحد منهم بيبقى له port number وsequence number، عشان لما تتجمع البيانات تاني ما تحصلش لخبطة.

2. **Flow Control:**
   - بتتحكم في معدل النقل لضمان أن المرسل والمستقبل يشتغلوا بنفس السرعة، عشان نتجنب فقد البيانات ونوصل لأفضل أداء.

3. **Protocol Selection:**
   - بتحدد البروتوكول المناسب لنقل البيانات:
     - **TCP:** دقيق جداً لكن بطيء، مناسب للتحميل أو إرسال الإيميلات.
     - **UDP:** سريع جداً لكن أقل دقة، مناسب للألعاب الأونلاين أو المكالمات. 
   - البروتوكول المناسب يُختار حسب الحاجة لسرعة أكبر أو دقة أعلى.
- كل دا بيتحدد في الـ transport layer **automatically**

![[Pasted image 20240508090626.png]]
![[Pasted image 20240508090538.png]]




#### 5. Network Layer (الطبقة الثالثة):
   - This layer is the **heart of internetworking**. 
   - بتتعامل مع **التوجيه (Routing)** وتحديد المسار الأمثل للبيانات عبر الشبكة باستخدام عناوين IP.
   - بيتم تقسيم البيانات هنا إلى **packets** ويتم إضافة عناوين IP للمصدر والوجهة.
   - الـ [[Network Components#Routers|Routers]] بتشتغل في الـ Layer دي، هي اللي بتعمل العملية دي أصلًا

![[Pasted image 20240727190730.png]]
##### What is it doing?
بتعمل عمليتين مهمين جدًا:
 1. Logical Addressing (End-to-end Addressing)
	- في المرحلة اللي فاتت نقلنا الداتا على شكل segments
	- هنا بيكون ال packet وهي ال data unit بتاع ال network layer
	- بيكون في ال packet عبارة عن data segment + Source IP (IPs) + destination IP (IPr)
	- بنضيف [[IP Address]] ليها للمرسل والمستقبل
2. Routing (أهم فايدة ليها)
	- عملية اختيار أفضل مسار ممكن الداتا تمشي فيه عشان توصل من ال source لل destination
	- بيساعدني في دا مجموعة من ال Protocols 
	  زي RIP (Routing Information protocol) أو OSPF (Open Shortest Path First)

![[Pasted image 20240508092357.png]]
#### 6. Data Link Layer (الطبقة الثانية):
   - بتتحكم في كيفية نقل البيانات عبر الوسائط الفيزيائية **physical network media** (مثل الكابلات أو الإشارات اللاسلكية).
   - بيتم هنا إنشاء **Frames** باستخدام **MAC Address** لضمان إرسال البيانات للجهاز الصحيح.
   - Protocols like Ethernet and Wi-Fi operate at this layer.

##### What is it doing?
###### 1. Framing
- عرفنا اننا بنعمل Logical addressing في المرحلة اللي فاتت ودلوقتي هنعمل **Physical Addressing**
- هنعمل دا عن طريق ال [[MAC Address]]
- بيستقبل ال data packet اللي جاية من ال network layer ويزود عليها MAC للمرسل والمستقبل
- بيتكون **Frame** اللي هو الـ Data unit في المرحلة دي
- العملية دي اسمها **Frame Encapsulation** بتحصل للجهاز اللي بيبعت الداتا والجهاز اللي بيستقبل بعد ما بيستلم ال frame بيقرأ الMAC وبعدين يعملFrame Decapsulation 
- عشان ياخد ال packet وبعدها يطلع على transport layer وهكذا لحد ما يوصل لل application layer

![[Pasted image 20240508114705.png]]
- Upper layers access the media 
- وهو ال transmission media اللي هو ال physical link بين جهازين سواء كابل او اشارات راديو او غيره

![[Pasted image 20240508123141.png]]

###### 2. Error Detection & Correction
- ممكن خلال النقل الداتا تتعرض لعوامل خارجية تسبب **مشاكل** زي وجود مجال مغناطيسي قريب من السلك
- في الـ data link layer هي اللي بتتأكد ان الـ data وصلت سليمة ومتأثرتش بأي عوامل خارجية ولو فيه أي error هيكتشف عن طريق عدة طرق وبعدين بيعمل correction عن طريق انه بيعمل discard للفريم اللي فيه مشكلة ويرجع يطلبه تاني

عندنا 3 طرق نكتشف بيهم ال error:

1. Parity Checking:
	الداتا بتبقا عبارة عن مجموعة bits فهنا بيعد عدد الوحايد لو زوجي يبقا ال parity bit = 0 ولو فردي يبقا 1
	بيقارن قيمة ال parity اللي موجودة في ال sender واللي موجودة في ال receiver ولازم يبقوا بيساووا بعض
	بس الطريقة دي هتنفع لو عندي مشكلة في bit واحد بس أكتر من كدا مش هتنفع
	
	![[Pasted image 20240508124017.png]]
2. Check Sum
	بياخد ال bits وبيجمع عليها ال complements المفروض كله يطلع واحد ولو عكسه المفروض يطلع zero 
	فلو طلع الناتج كله اصفار يبقا كدا العملية نجحت غير كدا يبقا فشلت 
	
	![[Pasted image 20240508124221.png]]
3. CRC (Cyclic redundancy check):
	نفس الفكرة مع اختلاف تفاصيل بسيطة 
	بينفذ معادلة رياضية على الداتا الموجودة في الباكت بتاع المرسل وبعدين يحطها في ال trailer بتاع الفريم ولما توصل للمستقبل هينفذ نفس المعادلة
	وبيقارن قيمة المعادلة هنا وهنا
	
	![[Pasted image 20240508124430.png]]

###### 3. CSMA (carrier sense multiple access)
- بيمنع ان يحصل collision بين الـ signals في الشبكة بتاعتي
- لما الجهاز بيبدأ يبعت أي رسالة بيدور ويشوف هل في الmedia فيه أي signal تانية  في نفس اللينك ولا لا
- أول ما يلاقيه idle بيبعت الماسدج بتاعنا

![[Pasted image 20240508124744.png]]
#### 1. **Physical Layer (الطبقة الأولى)**:
   - تتعامل مع النقل الفيزيائي للـ bits على وسائط الشبكة.
   - بتحدد الخصائص الفيزيائية **electrical or optical specifications** مثل مستويات الفولتية voltage levels، أنواع التوصيل، وطريقة ترميز الإشارات signal encoding.

##### What is it doing?
- بيحول الbits اللي وصلت لحد هنا لإشارات على حسب نوع ال media المستخدمه
- بعدين الإشارات دي بتتنقل عن طريق ال media لحد ما توصل لل physical layer بتاع الجهاز ال receiver وتمشي نفس الlayers بس بالعكس

![[Pasted image 20240508125044.png]]

---

### مثال عملي لمرور البيانات عبر الـ OSI Layers
- **سمير** عايز يبعت رسالة لصاحبه **مدحت**:
  - بيفتح المتصفح ويكتب **facebook.com** (بيتم استخدام **HTTP** في **Application Layer**).
  - في **Presentation Layer**، بتحصل عملية التشفير وتحويل الملفات ليفهمها المتصفح.
  - في **Session Layer** بتحدد وضع الاتصال (هنا **Full-duplex**).
  - في **Transport Layer**، بيتم تقسيم البيانات لـ **segments** باستخدام **TCP**.
  - في **Network Layer** بتضيف عناوين IP للـ **segments** وتحولها إلى **packets**.
  - في **Data Link Layer** بتضيف عناوين MAC وتحوّل الـ packets إلى **frames**.
  - في **Physical Layer** بتحول الـ frames إلى إشارات بتتنقل عبر الشبكة.

- بعد وصول البيانات للجهاز المستقبل، بتمر بنفس المراحل بالعكس لغاية ما توصل للـ Application Layer وتظهر على جهاز مدحت.

![[Pasted image 20240508130431.png]]

---

### مثال على الفرق بين الراوتر والسويتش
- الـ**Router** بيعمل على 3 طبقات ويهتم بعناوين الـ IP.
- الـ**Switch** بيعمل على طبقتين ويهتم فقط بالـ MAC Address.
---
### Examples
![[Pasted image 20240709070041.png]]
![[Pasted image 20240709070048.png]]
![[Pasted image 20240709070114.png]]
![[Pasted image 20240709070127.png]]
![[Pasted image 20240715052921.png]]
- لاحظ الفرق بين الراوتر والاسويتش وان router عبارة عن 3 layers وال switch اتنين بس واللي يفرقهم ان الراوتر بيهتم بال Network فمهتم بال [[IP Address]] انما ال Switch مجرد physical address اللي هو ال [[MAC Address]] والراوتر بيهتم به برضو 
