### مقدمة عن Normalization
الهدف منها إننا ننظم البيانات في جداول صغيرة بطريقة تقلل التكرار (Redundancy) وتحسن سلامة البيانات (Data Integrity). 
في الفيديو اللي شرحه عمرو الحلو، وضح بأسلوب بسيط ومفصل ليه بنعمل Normalization وازاي ده بيحسن الأداء ويقلل الأخطاء في قواعد البيانات.

---

#### مشاكل تكرار البيانات (Redundancy)  
لما يكون عندك بيانات متكررة في قاعدة البيانات، ده بيأدي إلى:
1. الـ**Waste of Space**: بتستهلك مساحة تخزينية أكبر من اللازم.
2. الـ**Data Inconsistency**: لما تعدّل في مكان وتنسى تعدّل في مكان تاني، ده يسبب تناقض في البيانات.


![[Pasted image 20241115131144.png]]
لازم أتأكد ان البيانات تبقا مظبوطة وأقدر أثق فيها وفي صحتها

3. الـ**Data Anomalies**:
   - الـ**Insertion Anomaly**: مش قادر تضيف بيانات معينة لأنها مرتبطة بشيء آخر مش موجود.
   - الـ**Update Anomaly**: تعديل البيانات بشكل جزئي يسبب تناقض.
   - الـ**Deletion Anomaly**: مسح بيانات يؤدي لمسح معلومات مهمة أخرى بالغلط.

---
### Normal Forms
هي مجموعة شروط أو Criteria بعمل Check عليها وبتقولي الديزاين بتاع الداتا بيز كويس قد ايه.
الـ **Normalization Forms** هي مجموعة معايير أو خطوات بنمشي عليها لتنظيم البيانات.
كل مستوى بيبني على اللي قبله.

![[Pasted image 20241115132511.png]]
النورماليزيشن بتاخدني من الخطر للأمان من خلال الـ Normal Forms
كل ما بزود ال Normal Form المشاكل بتتحل أكتر
بنبدأ من الـ First ولو متحقق بنروح للي بعده وهكذا لحد ما نوصل للآخر
### 1. First Normal Form (1NF)  
#### إيه هي First Normal Form (1NF)؟  
الـ **1NF** هي أول خطوة في تنظيم البيانات داخل الجداول في قواعد البيانات. 
هدفها الأساسي هو التأكد من إن الجدول منظم بشكل يسمح بسهولة التعامل مع البيانات بدون أي تعقيدات أو تكرار غير ضروري.

---

#### الشروط الأساسية للـ 1NF

1. **مفيش Multi-Valued Cells:**  
   ماينفعش تكون الخانة الواحدة تحتوي على أكتر من قيمة مفصولة بعلامة (زي الفواصل أو الأقواس). 
   كل قيمة لازم تكون في صف منفصل.

2. **لا تعتمد على ترتيب الصفوف (Row Order):**  
   الترتيب اللي بتحط بيه الصفوف في الجدول ماينفعش تستخدمه لتمثيل بيانات إضافية. 
   يعني مفيش معلومة تعتمد على إن الصف الأول هو الأقدم أو الثاني هو الأحدث.

3. **وجود Primary Key:**  
   لازم يكون عندك مفتاح أساسي (Primary Key) يميز كل صف عن الآخر.

---

#### Example
افترض إن عندك جدول بيسجل الفرق وأعضاءها بالشكل التالي:  

| Team       | Members         |  
|------------|-----------------|  
| Front End  | Tom, John       |  
| Back End   | Jenny, Bob      |  

##### لماذا هذا الجدول غير محقق لـ 1NF؟
1. الخلية تحتوي على قيم متعددة (Tom, John في نفس الخلية).
2. لو حبينا نعمل Query نجيب اسم شخص معين، هنحتاج نعمل معالجة إضافية Parsing عشان نفصل القيم.

---

##### الحل:  
نعيد تصميم الجدول بحيث كل قيمة تكون في صف منفصل:  

| Team       | Member  |  
|------------|---------|  
| Front End  | Tom     |  
| Front End  | John    |  
| Back End   | Jenny   |  
| Back End   | Bob     |  

1. كل خلية دلوقتي بتحتوي على قيمة واحدة فقط.  
2. لو عايز تعمل Query عشان تجيب أعضاء فريق معين، تقدر تستخدم أمر SQL بسيط زي:
   ```sql
   SELECT Member FROM Teams WHERE Team = 'Front End';
   ```

---


#### More Problems in this example
##### تغيير بيانات عضو في فريق
لو حبينا ننقل "John" من فريق "Front End" إلى "Back End"، كان الجدول القديم هيحتاج معالجة نصوص لفصل القيم وإعادة تخزينها. 
بعد التعديل للـ 1NF، التغيير أصبح بسيط جدًا:
- بس نعدل قيمة Team للصف الخاص بـ "John" ونخليها "Back End".

##### البحث عن بيانات محددة
لو عايز تدور على شخص اسمه "Jenny"، كان لازم تفحص كل الخلايا وتفصل القيم يدويًا. بعد التعديل للـ 1NF، البحث أصبح سهل جدًا:
   ```sql
   SELECT Team FROM Teams WHERE Member = 'Jenny';
   ```

---

#### أخطاء شائعة تخالف 1NF
1. **استخدام ترتيب الصفوف لتمثيل معلومات:**  
   مثال: لو قولت إن الصف الأول بيعبر عن العضو الأقدم في الفريق، والصف الثاني عن العضو الجديد، ده خطأ. 
   لازم تضيف عمود صريح يعبر عن الأقدمية سواء رقم أو تاريخ الإنضمام، زي:

| Team       | Member  | Seniority |  
|------------|---------|-----------|  
| Front End  | Tom     | 1         |  
| Front End  | John    | 2         |  

2. **عدم وجود Primary Key:**  
   لو الجدول مش فيه مفتاح أساسي زي "ID"، ممكن تحصل مشاكل تكرار. 
   الحل هو إضافة عمود جديد يميز كل صف زي "`MemberID`":

| MemberID | Team       | Member  |  
|----------|------------|---------|  
| 1        | Front End  | Tom     |  
| 2        | Front End  | John    |  

---

#### الخلاصة: شروط الـ 1NF
1. مفيش Multi-Valued Cells.
2. ترتيب الصف مبيعبرش عن حاجة ومقدرش أعتمد عليه.
3. وجود مفتاح أساسي يميز كل صف.

---
1. ميبقاش عندي أكتر من Data type في نفس الـ Column
2. مفيش أكتر من Column لهم نفس الإسم

![[Pasted image 20241115142110.png]]
### 2. Second Normal Form (2NF)  
**الشروط:**
1. محقق لـ 1NF.
2. كل عمود غير مفتاح (Non-Key Attribute) يعتمد بالكامل على المفتاح الأساسي (Primary Key).

**المشكلة:**  
لو أضفنا معلومة المدرس (Instructor) لكل كورس، ممكن نواجه مشكلة لأن المدرس بيعتمد على الكورس فقط، مش على المفتاح الأساسي بالكامل.

**الحل:**  
نفصل البيانات لجدولين:
1. جدول يربط الطالب بالكورس ودرجته.
2. جدول يربط الكورس بالمدرس.

---

#### **3. Third Normal Form (3NF)**  
**الشروط:**
1. محقق لـ 2NF.
2. مفيش عمود غير مفتاح (Non-Key Attribute) يعتمد على عمود غير مفتاح آخر.

**المشكلة:**  
لو أضفنا رقم تليفون المدرس، هنلاقي إن رقم التليفون بيعتمد على اسم المدرس، مش الكورس.

**الحل:**  
نفصل رقم التليفون في جدول جديد يحتوي على المدرس ورقم تليفونه.

---

#### **4. Fourth Normal Form (4NF)**  
**الشروط:**
1. محقق لـ 3NF.
2. مفيش علاقة بين القيم بدون وجود المفتاح الأساسي.

**المشكلة:**  
لو عندك منتجات بألوان ومقاسات مختلفة (جينز بألوان أسود وأزرق، مقاسات S وM)، مش لازم يكون في علاقة مباشرة بين الألوان والمقاسات.

**الحل:**  
نفصل البيانات لجدولين:  
1. جدول يربط المنتج بالألوان.  
2. جدول يربط المنتج بالمقاسات.

---

#### **5. Fifth Normal Form (5NF)**  
**الشروط:**
1. محقق لـ 4NF.
2. مفيش تقسيم للجدول (Decomposition) يؤدي لفقد بيانات عند إعادة الانضمام (Join).

**المثال:**  
لو عندك عملاء بيحبوا أنواع بيتزا معينة من ماركات معينة، بنفصل البيانات لثلاث جداول:
1. جدول يربط البراند بالأنواع.
2. جدول يربط العميل بالبراندات.
3. جدول يربط العميل بالأنواع.

---

### **الخلاصة**  
- **Normalization** هو المفتاح لتنظيم البيانات وتحسين تصميم قواعد البيانات.
- كل **Normal Form** بتضيف مستوى جديد من الحماية ضد الأخطاء وتضمن سلامة البيانات.
- التطبيق الصحيح لـ Normalization بيقلل التكرار ويزود الأداء والثقة في البيانات.

**نصيحة:** لو عايز تتعمق أكتر، اقرأ عن **Boyce-Codd Normal Form** وازاي بتتوسع في المفاهيم دي.

---

**الكود المذكور في الفيديو:**  
```sql
-- مثال على Primary Key
CREATE TABLE Students (
    StudentID INT PRIMARY KEY,
    CourseID INT,
    Score INT
);

-- فصل المدرس في جدول منفصل
CREATE TABLE Instructors (
    CourseID INT PRIMARY KEY,
    InstructorName VARCHAR(50)
);

-- فصل البيانات في 4NF
CREATE TABLE ProductColors (
    ProductID INT,
    Color VARCHAR(20)
);

CREATE TABLE ProductSizes (
    ProductID INT,
    Size VARCHAR(20)
);
```