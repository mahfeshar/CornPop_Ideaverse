---
up:
  - "[[CSharp MOC]]"
related: 
created: 2024-10-12
---
## Even C#

الأحداث في لغة C# تعتبر من المفاهيم المهمة جدًا، وخصوصًا لو كنت شغال على تطبيقات متقدمة. في المقال ده هنتكلم عن الأحداث، وهنوضح كل المفاهيم المهمة اللي تحتاج تعرفها عشان تفهم الأحداث بشكل جيد.

### أولاً: تعريف الأحداث

الأحداث هي عبارة عن إشعارات أو تنبيهات بتظهر لما يحصل حاجة مهمة في البرنامج. بمعنى تاني، لو حصل حدث معين في الكود، النظام هيبلغك عشان تقدر تتفاعل معاه. مثلاً، لو محفظتك اتسرقت، تقدر تقول "يا جماعة، أنا اتسرقت" كنوع من الإشعار.

### فهم المندوبين (Delegates)

قبل ما نتعمق في الأحداث، لازم نفهم حاجة اسمها المندوبين. المندوبين هما طرق لتحديد مجموعة من الوظائف (Methods) اللي تقدر تناديها من مكان تاني. في سياق الأحداث، المندوبين بيستخدموا عشان يشيروا للوظائف اللي هتتفاعل مع الحدث.

### تطبيق المبدأ المسؤولية الواحدة (Single Responsibility Principle)

مبدأ المسؤولية الواحدة يعني إن كل كلاس (Class) في الكود لازم يكون عنده سبب واحد بس عشان يتعدل. يعني، مثلاً، لو عندك كلاس خاص بحساب الرواتب، مهمته الوحيدة تكون حساب الرواتب، مش إنه يبعت إيميلات أو يسجل لوجات.

### كيف نعرف الأحداث

لما تحب تعرف حدث في الكود، بتعمله بالشكل التالي:

1. **إنشاء حدث**: لازم تحدد اسم الحدث ونوع البيانات اللي هيتبعت معاه.
2. **تعريف الـ Event Handler**: ده الكود اللي هيتنفذ لما الحدث يحصل.

مثال على ذلك:
```csharp
public class SalaryCalculator
{
    public delegate void SalaryCalculatedEventHandler(object sender, SalaryEventArgs e);
    public event SalaryCalculatedEventHandler SalaryCalculated;

    public void CalculateSalary(Employee employee)
    {
        // حساب الراتب
        decimal salary = employee.BaseSalary + employee.Bonus;
        
        // إشعار إن الراتب اتحسب
        OnSalaryCalculated(employee, salary);
    }

    protected virtual void OnSalaryCalculated(Employee employee, decimal salary)
    {
        SalaryCalculated?.Invoke(this, new SalaryEventArgs(employee, salary));
    }
}
```
### كيف نتعامل مع الأحداث

عند التعامل مع الأحداث، بنستخدم حاجة اسمها "Event Handlers". الـ Event Handler هو الوظيفة اللي هتشتغل لما الحدث يحصل. مثلاً، ممكن يكون عندك Event Handler بيبعت إيميل للموظف بعد حساب راتبه.

#### مثال على الـ Event Handler:

```csharp
public void OnSalaryCalculated(object sender, SalaryEventArgs e)
{
    Console.WriteLine($"راتب {e.Employee.Name} اتحسب، والراتب هو {e.Salary}");
}
```

### أهمية الأحداث

الأحداث بتساعدنا في فصل الكود بطريقة أفضل، لأن الكلاسات تركز على مهامها المحددة فقط. لو عايز تضيف سلوك جديد، كل اللي عليك تعمله هو إضافة Event Handler جديد بدل ما تعدل في الكود الأساسي.

### خلاصة

الأحداث في C# هي وسيلة قوية للتفاعل مع الأحداث المهمة في التطبيق. بفهمك لمفهوم المندوبين ومبدأ المسؤولية الواحدة، هتقدر تنشئ أحداث تتفاعل مع وظائف متعددة، وتضيف سلوكيات جديدة بشكل بسيط وسهل. لو عندك أي أسئلة أو محتاج تفاصيل أكتر، ما تترددش في السؤال!