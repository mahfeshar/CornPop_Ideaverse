### Distributed Systems vs Uniprocessor Systems

الفرق الأساسي بين الأنظمة الموزعة (Distributed Systems) والأنظمة أحادية المعالج (Uniprocessor Systems) هو كيفية التواصل بين العمليات (Interprocess Communication). في الأنظمة أحادية المعالج، يُفترض وجود ذاكرة مشتركة، مما يعني أن العمليات المختلفة يمكنها الوصول إلى نفس الموقع في الذاكرة للتواصل، وهذا يسهل تبادل البيانات بين العمليات بدون الحاجة لآليات خاصة لإرسال الرسائل.

أما في الأنظمة الموزعة، فلا توجد ذاكرة مشتركة، وهذا يعني أن التواصل بين العمليات يجب أن يعتمد بالكامل على إرسال واستقبال الرسائل. وبذلك، يجب إعادة تصميم طريقة التواصل بين العمليات من الصفر للتكيف مع غياب الذاكرة المشتركة.

### Interprocessor Communication (in a multiprocessor system)

في الأنظمة متعددة المعالجات، حيث يمتلك كل معالج دفق بيانات خاص به، هناك حاجة إلى أن تتواصل هذه المعالجات مع بعضها البعض. يتم ذلك من خلال عدة طرق، تشمل:

1. **Shared Memory (الذاكرة المشتركة)**:
   - في هذا النظام، يتم استخدام مساحة عنوان مشتركة يمكن لجميع المعالجات الوصول إليها. يُمكِن لمعالج معين كتابة البيانات في هذه الذاكرة، ويمكن لمعالج آخر قراءة البيانات من الموقع نفسه. هذه الطريقة تعتبر من الأساليب الشائعة للتواصل بين المعالجات في الأنظمة متعددة المعالجات.
   
   - **كيفية عمل الذاكرة المشتركة**: إذا أراد معالج معين (وليكن المعالج X) أن يمرر رقمًا إلى معالج آخر (وليكن المعالج Y)، فإن هذا يتم عبر خطوتين أساسيتين:
     1. يكتب المعالج X الرقم في الذاكرة المشتركة في موقع محدد يمكن للمعالج Y الوصول إليه.
     2. يقوم المعالج Y بعد ذلك بقراءة الرقم من الموقع نفسه في الذاكرة.

   - **المشكلة مع الذاكرة المشتركة**: إحدى المشكلات الكبيرة التي يمكن أن تواجه هذا النظام هي طلبات الوصول المتزامنة لنفس الموقع في الذاكرة، ما يؤدي إلى عدم التحديد (Nondeterminacy). فعندما يحاول أكثر من معالج قراءة أو كتابة البيانات في نفس الوقت في نفس الموقع، قد تحدث نتائج غير متوقعة أو غير قابلة للتكرار، وهو ما يعرف بالسلوك غير المحدد.
     
     - **مثال**: إذا كان هناك معالجين p1 وp2 يحاولان الوصول إلى قيمة معينة في الذاكرة المشتركة، فقد تكون النتيجة غير محددة بناءً على ترتيب وصولهما. على سبيل المثال، إذا قام p1 بكتابة قيمة معينة قبل أن يقوم p2 بقراءتها، فقد يحصل p2 على تلك القيمة، ولكن إذا قام p2 بالقراءة قبل أن يكتب p1، قد يحصل على قيمة أخرى، مما يؤدي إلى اختلاف النتيجة النهائية من تشغيل لآخر.

2. **Simultaneous Memory Accessing (الوصول المتزامن للذاكرة)**:
   - للوصول المتزامن إلى الذاكرة المشتركة، هناك تصنيفات متعددة، وهي كالتالي:
   
     - **Exclusive Read, Exclusive Write (EREW) SM Computers**: في هذا النوع من الحواسيب، يكون الوصول إلى مواقع الذاكرة حصريًا؛ أي أنه لا يُسمح لأي معالجين بقراءة أو كتابة في نفس الموقع في نفس الوقت.
     
     - **Concurrent Read, Exclusive Write (CREW) SM Computers**: في هذا النوع، يُسمح لعدة معالجات بقراءة نفس الموقع في الذاكرة في الوقت نفسه، لكن الكتابة تكون حصرية؛ أي أن معالج واحد فقط يمكنه الكتابة في الموقع في وقت معين.

     - **Exclusive Read, Concurrent Write (ERCW) SM Computers**: في هذا النوع، لا يُسمح لأكثر من معالج بالقراءة من نفس الموقع في نفس الوقت، ولكن يُسمح لأكثر من معالج بالكتابة في نفس الموقع في وقت واحد.
     
     - **Concurrent Read, Concurrent Write (CRCW) SM Computers**: هذا النوع يتيح للعديد من المعالجات القراءة والكتابة في نفس الموقع في الوقت نفسه، ما قد يسبب مشكلات في الكتابة المتزامنة.

   - **ملاحظة**: 
     - **Concurrent reading** (القراءة المتزامنة): عندما يقوم عدة معالجات بقراءة نفس الموقع، فإن كل معالج يأخذ نسخة من المحتوى ويخزنها في السجل الخاص به.
     - **Concurrent writing** (الكتابة المتزامنة): تحدث عندما يحاول عدة معالجات كتابة بيانات (قد تكون مختلفة) في نفس الموقع في الوقت نفسه، مما قد يؤدي إلى مشكلات تتعلق بتحديد القيمة النهائية المكتوبة.

   - **The Write Conflict in SIMD and MIMD**:
     - يُسمح لعدد محدود من المعالجات P بالوصول إلى مواقع الذاكرة في نفس الوقت في الأنظمة التي يكون فيها عدد المعالجات صغيرًا نسبيًا (أقل من 30).
     
     - **SIMD (Single Instruction, Multiple Data)**: في الحواسيب التي تعتمد على الذاكرة المشتركة في نظام SIMD، تعتبر هذه الطريقة غير واقعية ولا توجد حواسيب تجارية تعتمد على هذا التصميم.
     
     - **MIMD (Multiple Instruction, Multiple Data)**: في الأنظمة التي تعتمد على MIMD، يتم استخدام عدد محدود من المعالجات القوية (من 2 إلى 30 معالج)، ما يجعل النظام أكثر ملاءمة واستفادة من الذاكرة المشتركة مقارنةً بنظام SIMD.

3. **Interconnected Network (الشبكة المترابطة)**:
   - في هذا النوع، يكون لكل معالج ذاكرة خاصة به ولا توجد ذاكرة مشتركة. إذا احتاج أحد المعالجات إلى بيانات من معالج آخر، يجب تمرير البيانات صراحةً باستخدام أوامر الإرسال والاستقبال. على سبيل المثال، إذا احتاج المعالج p1 إلى بيانات موجودة في المعالج p2، يتم ذلك عبر إرسال البيانات باستخدام الأمر "send(x, p1)" ثم استقبالها عبر الأمر "receive(x, p2)". تُعرف هذه الطريقة بنقل الرسائل (message passing).

4. **Hybrid Designs (التصاميم الهجينة - Clusters of Processors)**:
   - إلى جانب الذاكرة المشتركة والذاكرة الموزعة، هناك تصاميم هجينة تجمع بين ميزات كلا النظامين. في هذه التصاميم، يتم تجميع مجموعة من المعالجات في clusters حيث يتم التواصل داخل cluster عبر "High-Speed Bus" للتواصل بين المعالجات بشكل سريع، بينما يتم استخدام شبكة مترابطة للتواصل بين clusters متعددة.

---

### Architectural Models of Multicomputer
1. **Client-Server Model**:
   - **Server**: هو برنامج خادم يقدم خدمات برمجية معينة ويعمل على جهاز واحد في الشبكة. يستجيب الخادم للطلبات من عمليات محلية أو بعيدة ويقوم بإرسال الردود.
   - **Client**: هو العملية التي تطلب الخدمة باستخدام مجموعة من العمليات التي تشكل الواجهة الخاصة به.

   **مزايا وعيوب هذا النموذج**:
   - **Dependency on Central Server** (الاعتماد على الخادم المركزي): تعتمد الشبكات القائمة على الخادم بشكل كبير على الخادم المركزي. إذا تعطل الخادم أو أصبح محملًا بمهام زائدة، فقد يتسبب ذلك بمشاكل في استجابة النظام بالكامل.
   - **Higher Installation Cost** (تكلفة التثبيت الأعلى): يتطلب هذا النوع من الشبكات خادمًا مخصصًا مما يجعله أكثر تكلفة عند التثبيت مقارنةً بشبكات "peer-to-peer".
   - **Higher Maintenance Cost** (تكلفة الصيانة العالية): تحتاج الشبكات التي تعتمد على الخادم إلى صيانة أكثر نظرًا لوجود خادم مخصص يجب مراقبته وصيانته باستمرار.

   - **ملاحظة**: الطلبات والردود تكون على شكل رسائل. بالإضافة إلى ذلك، يمكن أن تكون الخوادم نفسها عملاء لخوادم أخرى.

2. **Peer-to-Peer Model**:
   - **Motivation** (الدافع): يمكن أن يؤدي تركيز الخدمات على خادم واحد إلى تحميل زائد، خاصة عندما يكون هناك عدد كبير من العملاء. لذلك، هناك حاجة إلى توزيع الموارد المشتركة لتوزيع أحمال الحوسبة والتواصل بشكل أكثر كفاءة عبر عدد كبير من الحواسيب ووصلات الشبكة.

   **مزايا وعيوب هذا النموذج**:
   - **Unequal Resource Distribution** (توزيع غير متساوٍ للموارد): قد تعاني شبكات P2P من توزيع غير متساوٍ للموارد، مما يعني أن بعض الأجهزة قد تحتوي على موارد أكثر من الأخرى.
   - **Security Concerns** (مخاوف الأمان): شبكات P2P تكون عادةً أقل أمانًا من شبكات العميل/الخادم، لأن الأمان يتم إدارته بواسطة كل جهاز فردي.
   - **Performance Limitations** (قيود الأداء): قد تعاني شبكات P2P من قيود أداء لأن حركة البيانات يتم توزيعها عبر عدة أجهزة.

---
### Napster
الـNapster هو تطبيق تم تصميمه لتسهيل مشاركة ملفات الموسيقى والفيديو بين المستخدمين حول العالم. إليك كيفية عمله بالتفصيل:

- **Uploading (رفع الملفات)**:
  - يتصل العميل بخادم Napster ويشارك قائمة بأسماء الملفات الموسيقية الموجودة على جهازه، لكنه لا يرسل الملفات الفعلية للخادم.
  - يقوم الخادم بحفظ قائمة بأسماء الملفات مع عناوين IP الخاصة بأجهزة المستخدمين وأرقام المنافذ (port numbers)، مما يسمح للخادم بتحديد مكان الملفات بدون الحاجة لحفظها.

- **Downloading (تنزيل الملفات)**:
  - عندما يريد العميل تنزيل ملف، يقوم بإرسال كلمات بحث للخادم. يبحث الخادم في الدليل باستخدام هذه الكلمات ويعيد قائمة بأجهزة المستخدمين التي تحتوي على الملفات المطلوبة، إلى جانب عناوين IP وأرقام المنافذ.
  - يقوم العميل بعد ذلك بفحص سرعات النقل لكل جهاز في القائمة ويختار الجهاز الذي يتيح أفضل معدل نقل للبدء بتحميل الملف منه مباشرةً.

### Gnutella
الـGnutella هو نظام P2P يعتمد على مبدأ يسمى "query flooding"، وفيه:

- **تواصل الأجهزة**:
  - عندما يقوم جهاز أو "نود" (node) ببدء الاتصال، فإنه يتصل بجهاز آخر متصل ليعرف أصدقائه أو الأجهزة المتصلة به في الشبكة، وهذه الأجهزة تصبح "الأصدقاء" أو الأجهزة المتصلة بالشبكة.

- **البحث عن الملفات**:
  - عندما يريد أحد الأجهزة البحث عن ملف، يقوم بإرسال طلب للأجهزة المتصلة به، وإذا لم يكن لديهم الملف، يقومون بتمرير الطلب إلى أجهزتهم المتصلة، وهكذا حتى يتم العثور على الملف.
  - عندما يتم العثور على الملف، يتم إرسال معلومات عن الملف إلى الجهاز الذي بدأ البحث، ويتم إرسال الردود حتى تصل إلى المرسل الأصلي.

### Fast Track / Kazaa
الـFast Track وKazaa هما أنظمة P2P أخرى لكن تعتمد على طريقة "selective query flooding"، حيث:

- **Supernodes**:
  - في هذا النظام، يتم اختيار مجموعة من الأجهزة التي تتمتع بقدرات عالية في الاتصال وسرعات كبيرة وتسمى "supernodes". هذه الأجهزة تعتبر أسرع من باقي الأجهزة وتعمل كخوادم فهرسة للأجهزة الأبطأ.
  
- **الانضمام للنظام**:
  - عندما يرغب جهاز جديد في الانضمام للنظام، فإنه يتصل بأحد أجهزة "supernodes" للانضمام إلى الشبكة.
  
- **نشر الملفات والبحث عنها**:
  - عندما يريد جهاز نشر ملف، يرسل قائمة الملفات لأحد "supernodes"، وعند البحث عن ملف، يتم إرسال الطلب إلى "supernode" الذي يقوم بنشره لباقي الأجهزة ذات السرعات العالية.

### Variations in Distributed Systems

1. **Multiple Servers**:
   - بعض الخدمات يمكن تنفيذها على عدة خوادم على حواسيب مختلفة. يمكن للخادم تقسيم مجموعة من العناصر التي يعمل بها وتوزيعها على عدة مضيفين، أو إنشاء نسخ متعددة (replicas) للعناصر على مضيفين مختلفين.
   - يجب على الخادم التأكد من أن أي تغييرات على العناصر في أي مضيف يتم إدارتها وتزامنها بشكل صحيح عبر جميع المضيفين.

   **أمثلة**:
   - **Partitioned Data**: البيانات التي يتم توزيعها على مضيفين مختلفين حيث يتولى كل خادم إدارة مجموعة خاصة به من الملفات.
   - **Replicated Data**: البيانات التي يتم نسخها إلى عدة مضيفين لضمان توافرها وتجنب الأعطال.

2. **Proxy Servers**:
   - تعمل كوسيط بين العميل والخادم، وتقوم بتخزين البيانات التي تم الوصول إليها مؤخرًا في ذاكرة مؤقتة (cache) مشتركة. عندما يحتاج العميل إلى بيانات معينة، يقوم الخادم الوسيط بالتحقق إذا كانت البيانات متاحة ومحدثة في الذاكرة المؤقتة. إذا لم تكن متاحة، يجلبها الخادم من المصدر الرئيسي ويخزنها ليستخدمها العملاء في المرات القادمة.
   - يهدف الخادم الوسيط إلى زيادة توافر الخدمات وتحسين الأداء عن طريق تقليل العبء على الشبكة.

3. **Mobile Code**:
   - عند تشغيل المستخدم لمتصفح، يقوم بتحميل كود الخدمة من الخادم إلى المتصفح ويعمل محليًا على جهاز المستخدم. هذا النوع من الكود يُعرف أحيانًا بـ"code migration" لأنه ينتقل من نظام ثقيل إلى نظام أخف.
   - **أمثلة**: الكوكيز، السكربتات، ActiveX، والجافا أبلتس.

4. **Mobile Agents**:
   - هو برنامج يعمل (يشمل الكود والبيانات) ينتقل بين الأجهزة لتنفيذ مهام معينة نيابة عن العميل ويعود بالنتيجة. على سبيل المثال، يمكن استخدامه لجمع المعلومات أو البحث.
   - مقارنةً بالعميل الثابت، يُحوّل العميل المتنقل الاستدعاءات البعيدة إلى استدعاءات محلية، ما يقلل من تكلفة التواصل والوقت.
   - قد يواجه مشكلات أمنية، حيث أن الأجهزة التي تستقبل العميل المتنقل تحدد ما إذا كانت تسمح له بالوصول إلى الموارد المحلية.

5. **Thin Clients and Computer Servers**:
   - تختلف الأنظمة بناءً على مكان توزيع المكونات (مثل البيانات وأعباء العمل) عبر شبكة الحواسيب، وطبيعة العلاقات بين هذه المكونات.
